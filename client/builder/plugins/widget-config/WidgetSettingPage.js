//>>built
require({cache:{"url:builder/plugins/widget-config/WidgetSettingPage.html":'\x3cdiv class\x3d"widget-setting-page"\x3e\r\n  \x3cdiv class\x3d"section common-setting" data-dojo-attach-point\x3d"commonSettingNode"\x3e\r\n    \x3cdiv class\x3d"basic"\x3e\r\n      \x3cdiv class\x3d"icon jimu-float-leading"\x3e\r\n        \x3cimg class\x3d"real-icon"  data-dojo-attach-point\x3d"iconNode"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"right jimu-float-trailing jimu-leading-margin1"\x3e\r\n        \x3cinput data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"labelNode" placeholder\x3d"${nls.widgetLabel}" required\x3d"true" class\x3d"widget-setting-input"\x3e\r\n        \x3cdiv class\x3d"right-foot" data-dojo-attach-point\x3d"rightFooterNode"\x3e\r\n          \x3cdiv class\x3d"image-container"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"imageChooser"\x3e\x3c/div\x3e\r\n            \x3cspan nowrap class\x3d"change-icon" data-dojo-attach-point\x3d"changeNode"\x3e${nls.changeIcon}\x3c/span\x3e\r\n            \x3ca class\x3d"help-link jimu-float-trailing" target\x3d"_blank" data-dojo-attach-point\x3d"helpNode"\x3e${nls.more}\x3c/a\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"layout"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"section widget-setting" data-dojo-attach-point\x3d"widgetSettingNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/config dojo/Deferred dojo/request dojo/topic dojo/aspect dojo/on dojo/mouse dojo/query dojo/string dojo/NodeList-dom dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./WidgetSettingPage.html ./WidgetDefaultSettingPage jimu/utils jimu/WidgetManager jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/ImageChooser jimu/dijit/LoadingIndicator jimu/dijit/Message dijit/form/CheckBox".split(" "),
function(m,b,c,B,C,n,f,p,D,e,E,F,q,G,r,s,t,u,v,w,h,x,H,y,z,A,I){var g={overview:"widget-overview.htm",attributetable:"widget-attribute-table.htm",basemapgallery:"widget-basemap.htm",bookmark:"widget-bookmark.htm",chart:"widget-chart.htm",headercontroller:"widget-header-controller-and-sidebar-controller.htm",sidebarcontroller:"widget-header-controller-and-sidebar-controller.htm",coordinate:"widget-coordinates.htm",directions:"widget-directions.htm",draw:"widget-draw.htm",edit:"widget-edit.htm",geocoder:"widget-geocoder.htm",
geoprocessing:"widget-geoprocessing.htm",homebutton:"widget-home-button.htm",layerlist:"widget-layer-list.htm",legend:"widget-legend.htm",measurement:"widget-measurement.htm",mylocation:"widget-my-location.htm",overviewmap:"widget-overview-map.htm",print:"widget-print.htm",query:"widget-query.htm",scalebar:"widget-scalebar.htm",splash:"widget-splash.htm",about:"widget-about.htm",analysis:"widget-analysis.htm",swipe:"widget-swipe.htm",timeslider:"widget-time-slider.htm"},k={overview:"#",attributetable:"120000943",
basemapgallery:"120000944",bookmark:"120000945",chart:"120000946",headercontroller:"120000963",sidebarcontroller:"120000963",coordinate:"120000947",directions:"120000948",draw:"120000949",edit:"120000950",geocoder:"120000951",geoprocessing:"120000952",homebutton:"120000953",layerlist:"120000954",legend:"120000955",measurement:"120000956",mylocation:"120000957",overviewmap:"120000958",print:"120000959",query:"120000960",scalebar:"120000961",splash:"120000964",about:"120000999",analysis:"120001019",
swipe:"120001020",timeslider:"120001021"},l={overview:"#",attributetable:"120000943",basemapgallery:"120000944",bookmark:"120000945",chart:"120000946",headercontroller:"120000963",sidebarcontroller:"120000963",coordinate:"120000947",directions:"120000948",draw:"120000949",edit:"120000950",geocoder:"120000951",geoprocessing:"120000952",homebutton:"120000953",layerlist:"120000954",legend:"120000955",measurement:"120000956",mylocation:"120000957",overviewmap:"120000958",print:"120000959",query:"120000960",
scalebar:"120000961",splash:"120000964",about:"120000999",analysis:"120001019",swipe:"120001020",timeslider:"120001021"};return m([r,s,t],{templateString:u,startup:function(){this.inherited(arguments);this.own(e(window,"resize",b.hitch(this,this.resize)));this.init()},init:function(){this.loading=new z;this.loading.placeAt(this.widgetSettingNode);this.initCommonAttr();this.initWidgetAttr();this.resize()},resize:function(){var a=c.getContentBox(this.domNode);c.setStyle(this.widgetSettingNode,{height:a.h-
90+"px"})},onCancel:function(){this.onClose();this.popup.close()},onOk:function(){var a=this._checkLabelExist();if(a)return new A({message:a}),!1;this.imageChooser.imageData&&(this.setting.icon=this.imageChooser.imageData);this.setting.label=this.labelNode.get("value");if(this.settingDijit){a=this.settingDijit.getConfig(!0);if(!1===a)return!1;this.setting.config=a}p.publish("widgetSettingPageOk",this.setting);this.onClose();this.popup.close()},_checkLabelExist:function(){var a=0,d=this.labelNode.get("value");
if(""===q.trim(d))return this.nls.labelRequired;this.appConfig.visitElement(b.hitch(this,function(b){this.setting.id!==b.id&&b.label===d&&a++}));return 0<a?this.nls.labelExists:""},onClose:function(){this.settingViewStack?(this.settingDijitUI.destroy(),this.settingDijitJSON.destroy(),this.settingViewStack.destroy()):this.settingDijit&&this.settingDijit.destroy()},_getHelpLink:function(a){var d=new n;a=a.toLowerCase();if(window.isXT)f("/webappbuilder/help/exists",{handleAs:"json"}).then(b.hitch(this,
function(c){!c||!c.exists?d.resolve("#"):f("/webappbuilder/help/cxhelp.js",{handleAs:"json"}).then(b.hitch(this,function(c){var b="#";c&&(c.m&&c.m[l[a]])&&(b="/webappbuilder/help/"+c.m[l[a]]);d.resolve(b)}),b.hitch(this,function(a){console.warn(a);d.resolve("#")}))}),function(a){console.error(a);d.resolve("#")});else{var c=x.getPortalUrlFromLocation();if(-1<c.indexOf("arcgis.com")){var e="#";g&&g[a]&&(e="http://doc.arcgis.com/en/web-appbuilder/create-apps/"+g[a]);d.resolve(e)}else f(c+"portalhelp/en/website/help/cxhelp.js",
{handleAs:"json"}).then(b.hitch(this,function(b){var e="#";b&&(b.m&&b.m[k[a]])&&(e=c+"portalhelp/en/website/help/"+b.m[k[a]]);d.resolve(e)}),b.hitch(this,function(a){console.warn(a);d.resolve("#")}))}return d},initCommonAttr:function(){var a=w.processUrlInAppConfig(this.setting.icon);c.setAttr(this.iconNode,"src",a);this.labelNode.set("value",this.setting.label);this._getHelpLink(this.setting.name).then(b.hitch(this,function(a){"#"!==a&&(c.setStyle(this.helpNode,"display","inline-block"),c.setAttr(this.helpNode,
"href",a))}));this.setting.inPanel?(this.imageChooser=new y({goldenWidth:24,goldenHeight:24},this.imageChooser),(a=c.getMarginBox(this.changeNode))&&0<a.w&&c.setStyle(this.imageChooser.domNode,"width",a.w+"px"),this.own(e(this.imageChooser,"imageChange",b.hitch(this,function(a){this.iconNode.src=a;this.setting.icon=a})))):c.addClass(this.changeNode,"disable-change-icon")},initWidgetAttr:function(){!1===this.setting.hasConfig?this.widgetSettingNode.innerHTML='\x3cdiv class\x3d"noconfig-info"\x3e'+
this.nls.noConfig+"\x3c/div\x3e":h.getInstance().tryLoadWidgetConfig(this.setting).then(b.hitch(this,function(a){this.setting.config=a;this.setting.hasSettingPage?h.getInstance().loadWidgetSettingPage(this.setting).then(b.hitch(this,function(a){this.widgetSettingNode?(this.settingDijit=a,c.place(this.settingDijit.domNode,this.widgetSettingNode),this.settingDijit.startup(),this.loading.destroy()):a.destroy()})):this.widgetSettingNode&&(this.settingDijit=new v({config:this.setting.config}),c.place(this.settingDijit.domNode,
this.widgetSettingNode),this.settingDijit.startup(),this.loading.destroy())}))},setAppConfig:function(a){this.appConfig=a}})});